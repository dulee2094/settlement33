# 제안 유효기간 타이머 기능 구현 완료 보고서

## 📅 작업 일시
2026-01-21

## 🎯 구현 목표
제안 등록 후 상대방의 응답을 기다리는 동안, 제안의 남은 유효기간을 실시간 타이머로 표시하여 사용자에게 명확한 정보를 제공하고 불필요한 대기 불안감을 해소함.

---

## ✅ 구현 상세

### 1. **타이머 상태 관리 (Frontend)**
- **변수 추가**: `proposalExpiration`, `timerInterval`
- **기능**: 서버로부터 받은 만료 시간(`expiresAt`)을 기반으로 남은 시간 계산

### 2. **실시간 타이머 UI**
- **위치**: 제안 후 "대기 중" 화면
- **디자인**:
  - **기본**: 녹색 (Green), "00:00:00" 형식
  - **1시간 미만**: 주황색 (Orange)
  - **10분 미만**: 빨간색 (Red) + 펄스 애니메이션 (긴급성 강조)
- **만료 시**: "만료됨" 메시지와 함께 상태 업데이트 버튼 표시

### 3. **작동 로직**
1. 페이지 로드 시 `initializePage`에서 `myLastProposal.expiresAt` 저장
2. 대기 화면(`waitingState`) 렌더링 시 `startExpirationTimer()` 호출
3. 1초마다 남은 시간 업데이트
4. 시간 종료 시 타이머 중지 및 만료 메시지 표시

---

## 🎨 UI 예시

### **정상 (1시간 이상)**
```
남은 유효 시간
05 : 59 : 32
(2026.01.22 14:00 만료)
```

### **임박 (10분 미만)**
```
⚠️ 제안 유효 시간
00 : 09 : 59  (빨간색 + 깜빡임)
(2026.01.21 23:00 만료)
```

### **만료됨**
```
⚠️ 제안 유효 시간이 만료되었습니다.
상대방이 시간 내에 응답하지 않아 이 라운드는 종료되었습니다.
[상태 업데이트]
```

---

## 🔧 수정된 파일
- `blind_proposal.html`: 상태 변수 추가, 타이머 로직 구현, UI 렌더링 수정

이제 사용자는 자신의 제안이 언제까지 유효한지 명확히 알 수 있으며, 시스템의 신뢰도가 향상되었습니다.
