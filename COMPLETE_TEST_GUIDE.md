# 🧪 로컬 멀티 유저 기능 테스트 가이드

## 📋 현재 상태
- ✅ 서버 실행 중: http://localhost:3000
- ✅ 테스트 계정 준비됨
  - 가해자: offender@test.com / test1234
  - 피해자: victim@test.com / test1234

---

## 🎯 완전한 테스트 시나리오

### 시나리오 1: 사건 생성 및 연결 (5분)

#### Chrome (가해자)
1. 로그인: offender@test.com / test1234
2. 대시보드에서 "새 사건 생성" 클릭
3. 사건 정보 입력:
   - 사건 제목: "테스트 사건"
   - 사건 설명: "로컬 테스트용 사건입니다"
   - 피해자 이름: "테스트_피해자"
4. **초대 코드 복사** (예: ABC123)

#### Edge (피해자)
1. 로그인: victim@test.com / test1234
2. "사건 참여" 클릭
3. 초대 코드 입력: (가해자가 만든 코드)
4. 연결 확인

**확인 사항**:
- ✅ 양쪽 대시보드에 같은 사건이 표시됨
- ✅ 연결 상태가 "연결 완료"로 변경됨

---

### 시나리오 2: 사과문 작성 및 확인 (10분)

#### Chrome (가해자)
1. 사건 상세 페이지 진입
2. 왼쪽 메뉴에서 "사과문" 클릭
3. "사과문 작성하러 가기" 버튼 클릭
4. 사과문 작성:
   ```
   진심으로 사과드립니다.
   제 경솔한 행동으로 인해 피해를 입히게 되어 정말 죄송합니다.
   앞으로 이런 일이 없도록 하겠습니다.
   ```
5. "디자인 미리보기 및 전송" 클릭
6. 전송 확인

#### Edge (피해자)
1. 사건 상세 페이지에서 "사과문" 메뉴 클릭
2. 도착한 사과문 확인
3. 이미지 또는 텍스트로 표시됨

**확인 사항**:
- ✅ 가해자가 작성한 사과문이 피해자에게 표시됨
- ✅ 실시간으로 업데이트됨 (3초 폴링)

---

### 시나리오 3: 블라인드 합의금 제안 (15분)

#### Chrome (가해자)
1. "합의금 제안" 메뉴 클릭
2. "합의금 제안하러 가기" 클릭
3. 블라인드 제안 페이지에서:
   - 제안 금액: 500만원
   - "제안 제출" 클릭

#### Edge (피해자)
1. "합의금 제안" 메뉴 클릭
2. "합의금 제안하러 가기" 클릭
3. 블라인드 제안 페이지에서:
   - 제안 금액: 700만원
   - "제안 제출" 클릭

#### 양쪽 모두
1. 분석 결과 확인:
   - 차이: 200만원 (28.6%)
   - 신호등: 빨간불 (차이가 큼)
2. 다음 라운드 진행
3. 금액 조정하여 재제안

**테스트 케이스**:
- ✅ 10% 이내 차이: 중간 합의 제안 표시
- ✅ 정확히 일치: 즉시 합의 완료
- ✅ 차이가 큼: 다음 라운드 진행

**중간 합의 테스트**:
- 가해자: 550만원
- 피해자: 600만원
- 차이: 50만원 (8.3%) → 중간값 575만원 제안

---

### 시나리오 4: 실시간 채팅 (5분)

#### Chrome (가해자)
1. "안심 채팅" 메뉴 클릭
2. 메시지 입력: "안녕하세요, 합의 진행 상황을 논의하고 싶습니다"
3. 전송

#### Edge (피해자)
1. "안심 채팅" 메뉴 클릭
2. 메시지 실시간 수신 확인
3. 답장: "네, 좋습니다. 어떤 부분을 논의하실까요?"

**확인 사항**:
- ✅ 메시지가 실시간으로 표시됨
- ✅ 양방향 통신 정상 작동
- ✅ 시간 표시 정확

---

### 시나리오 5: 서류 공유 (10분)

#### Chrome (가해자)
1. "서류 공유함" 메뉴 클릭
2. 파일 업로드:
   - 예: 신분증 사본, 진단서 등
3. 업로드 확인

#### Edge (피해자)
1. "서류 공유함" 메뉴 클릭
2. 업로드된 서류 목록 확인
3. 다운로드 또는 미리보기

**확인 사항**:
- ✅ 파일 업로드 성공
- ✅ 상대방이 파일 확인 가능
- ✅ 다운로드 정상 작동

---

### 시나리오 6: 합의서 작성 (10분)

#### 조건: 블라인드 제안에서 합의 완료 후

#### Chrome (가해자)
1. "합의서" 메뉴 클릭
2. 합의 내용 확인
3. 전자 서명 (서명 패드 사용)
4. "합의서 제출" 클릭

#### Edge (피해자)
1. "합의서" 메뉴 클릭
2. 가해자가 작성한 합의서 확인
3. 전자 서명
4. "합의서 제출" 클릭

**확인 사항**:
- ✅ 양쪽 모두 서명 완료
- ✅ 최종 합의서 생성
- ✅ PDF 다운로드 가능

---

### 시나리오 7: 계좌 정보 등록 및 결제 요청 (10분)

#### Edge (피해자)
1. "합의금 지급/수령" 메뉴 클릭
2. 계좌 정보 입력:
   - 은행: 국민은행
   - 계좌번호: 123-456-789012
   - 예금주: 테스트_피해자
3. 전자 서명
4. "계좌 정보 제출" 클릭

#### Chrome (가해자)
1. "합의금 지급/수령" 메뉴 클릭
2. 피해자 계좌 정보 확인
3. 결제 요청서 작성
4. 전자 서명
5. "결제 요청 제출" 클릭

**확인 사항**:
- ✅ 계좌 정보 정확히 표시
- ✅ 결제 요청서 생성
- ✅ 양쪽 모두 확인 가능

---

### 시나리오 8: 변호사 상담 신청 (5분)

#### Chrome 또는 Edge (아무나)
1. "변호사 상담신청" 메뉴 클릭
2. 상담 신청서 작성:
   - 이름: 테스트 사용자
   - 전화번호: 010-1234-5678
   - 사건 요지: 합의 진행 중 법적 조언 필요
   - 상담 요청 내용: 합의서 작성 시 주의사항
3. 개인정보 동의 체크
4. "상담 신청하기" 클릭

**확인 사항**:
- ✅ 신청 완료 메시지 표시
- ✅ 서버에 저장됨

---

## 🎬 화면 분할 팁

### Windows 화면 분할
1. Chrome 창 선택 → **Win + ←** (왼쪽 절반)
2. Edge 창 선택 → **Win + →** (오른쪽 절반)

이렇게 하면 두 사용자의 화면을 동시에 볼 수 있어 실시간 동기화를 확인하기 쉽습니다!

---

## 🐛 디버깅 팁

### 브라우저 개발자 도구 활용
- **F12** 또는 **Ctrl+Shift+I**
- **Console 탭**: JavaScript 에러 확인
- **Network 탭**: API 요청/응답 확인
- **Application 탭**: localStorage 데이터 확인

### 서버 로그 확인
터미널에서 실시간 로그 확인:
- API 요청
- 데이터베이스 쿼리
- 에러 메시지

### localStorage 확인
브라우저 콘솔에서:
```javascript
// 현재 사용자 정보
console.log(localStorage.getItem('user_info'));

// 현재 사건 ID
console.log(localStorage.getItem('current_case_id'));

// 모든 localStorage 데이터
console.log(localStorage);
```

---

## 📊 테스트 체크리스트

### 기본 기능
- [ ] 회원가입 및 로그인
- [ ] 사건 생성 및 초대
- [ ] 사건 참여 (초대 코드)
- [ ] 사건 목록 표시

### 사건 상세 기능
- [ ] 사건 정보 표시
- [ ] 진행 현황 표시
- [ ] 빠른 실행 버튼

### 사과문
- [ ] 가해자: 사과문 작성
- [ ] 가해자: AI 초안 생성
- [ ] 가해자: 디자인 미리보기
- [ ] 가해자: 전송
- [ ] 피해자: 사과문 수신
- [ ] 피해자: 이미지 표시

### 블라인드 제안
- [ ] 양쪽: 제안 금액 입력
- [ ] 양쪽: 제안 제출
- [ ] 양쪽: 분석 결과 확인
- [ ] 신호등 표시 (빨강/노랑/초록)
- [ ] 중간 합의 제안 (10% 이내)
- [ ] 다음 라운드 진행
- [ ] 합의 완료

### 채팅
- [ ] 메시지 전송
- [ ] 실시간 수신
- [ ] 시간 표시
- [ ] 스크롤 자동 이동

### 서류 공유
- [ ] 파일 업로드
- [ ] 파일 목록 표시
- [ ] 파일 다운로드
- [ ] 파일 미리보기

### 합의서
- [ ] 합의 내용 표시
- [ ] 전자 서명
- [ ] 양쪽 서명 확인
- [ ] PDF 생성
- [ ] PDF 다운로드

### 계좌 정보
- [ ] 피해자: 계좌 정보 입력
- [ ] 피해자: 전자 서명
- [ ] 가해자: 계좌 정보 확인
- [ ] 가해자: 결제 요청서 작성

### 변호사 상담
- [ ] 상담 신청서 작성
- [ ] 개인정보 동의
- [ ] 신청 완료

---

## 🎯 고급 테스트 시나리오

### 동시성 테스트
1. 양쪽에서 동시에 메시지 전송
2. 양쪽에서 동시에 제안 제출
3. 충돌 처리 확인

### 에러 처리 테스트
1. 잘못된 초대 코드 입력
2. 빈 값으로 제출
3. 네트워크 오류 시뮬레이션

### 성능 테스트
1. 많은 메시지 전송
2. 큰 파일 업로드
3. 여러 라운드 제안

---

## 📞 문제 발생 시

1. **F12 → Console 탭**에서 에러 확인
2. **Network 탭**에서 API 요청 실패 확인
3. **서버 터미널**에서 로그 확인
4. 에러 메시지 스크린샷 공유

---

**테스트를 시작하세요!** 🚀

발견한 버그나 개선사항이 있으면 바로 알려주세요!
